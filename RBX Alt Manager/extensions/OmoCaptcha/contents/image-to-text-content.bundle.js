(()=>{"use strict";const e={API_KEY:{key:"api_key",defaultValue:""},APP_ID:{key:"appId",defaultValue:""},POWER_ON:{key:"power_on",defaultValue:!0},TIKTOK:{key:"tiktok",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},FUNCAPTCHA:{key:"funcaptcha",defaultValue:{delayClick:100,loop:!0,isActive:!0,maxImageCaptcha:25}},ZALO:{key:"zalo",defaultValue:{delayClick:100,loop:!0,isActive:!0}},SHOPEE:{key:"shopee",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},RECAPTCHAV2:{key:"reCaptchav2",defaultValue:{delayClick:500,loop:!0,isActive:!0,useToken:!1}},AMZN:{key:"amzn",defaultValue:{delayClick:100,loop:!0,isActive:!0}},GEETEST:{key:"geetest",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},SLIDE_ALL:{key:"slide_all",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},HCAPTCHA:{key:"hcaptcha",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},CLOUDFLARE:{key:"cloudflare",defaultValue:{delayClick:2e3,isActive:!0}},TENCENT:{key:"tencent",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}}};async function t(e,t,a){const c="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{return await new Promise(((o,i)=>{c.sendMessage({source:e,type:t,data:a},(e=>{c.lastError?i(new Error(`Error sending message: ${c.lastError.message}`)):o(e)}))}))}catch(e){throw e}}const a=async(e,t)=>{const a="undefined"!=typeof browser?browser.storage.local:chrome.storage.local,c="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{const o=await a.get([e]);if(c.lastError)throw new Error(`Error retrieving ${e}: ${c.lastError.message}`);return null!=o[e]?o[e]:t}catch(e){throw e}};Promise.resolve();async function c(e){return new Promise((t=>setTimeout(t,e)))}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:5e3,maxRetries:3,typeImage:"png"};try{const{timeout:a,maxRetries:o,typeImage:i}=t,r=`image/${i||"png"}`,n={arkoselabs:"image/jpeg"};function l(e){for(const[t,a]of Object.entries(n))if(e.includes(t))return a;return r}if(e instanceof HTMLCanvasElement||e.tagName&&"CANVAS"===e.tagName.toUpperCase())try{if(0===e.width||0===e.height)return"";const s=e.getBoundingClientRect(),u=s.width,p=s.height,m=document.createElement("canvas");m.width=u,m.height=p;m.getContext("2d").drawImage(e,0,0,u,p);const d=m.toDataURL(r).split(",")[1];return d||""}catch(h){return""}if(e instanceof Element)try{const g=e.src;if(g&&g.startsWith("data:image/")){const f=g.split(",")[1];return f||""}e=g||""}catch(w){return""}if("string"==typeof e&&e.startsWith("blob:"))try{return await new Promise((t=>{const a=new Image;a.setAttribute("crossOrigin","anonymous");const c=setTimeout((()=>{t("")}),1e3);a.onload=function(){clearTimeout(c);try{const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight;a.getContext("2d").drawImage(this,0,0);const c=l(e);a.toBlob((e=>{if(!e)return void t("");const a=new FileReader;a.onloadend=()=>{const e=a.result.split(",")[1];t(e)},a.onerror=()=>t(""),a.readAsDataURL(e)}),c)}catch(e){t("")}},a.onerror=()=>{clearTimeout(c),t("")},a.src=e}))}catch(y){return""}if("string"==typeof e)try{for(let k=0;k<o;k++)try{const S=new AbortController,b=setTimeout((()=>S.abort()),a),I=await fetch(e,{signal:S.signal});if(clearTimeout(b),!I.ok)throw new Error(`HTTP error ${I.status}`);const E=await I.blob();return await new Promise(((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result.split(",")[1]),a.onerror=()=>t(new Error("Failed to read blob as base64")),a.readAsDataURL(E)}))}catch(C){if(k===o-1)return"";await c(500)}}catch(v){return""}return""}catch(A){return""}}const i=window.location.hostname,r={"www.facebook.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'input[id*="_r_"]'},"en-gb.facebook.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'input[id*="_r_"]'},"web.facebook.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'input[id*="_r_"]'},"m.facebook.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'input[id*="captcha_response"]'},"free.facebook.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'input[id*="captcha_response"]'},"signin.aws.amazon.com":{captchaImageSelector:'[class*="awsui_child"] img[id*="captcha_image"]',inputSelector:'[class*="awsui"] input[class*="awsui_input"]'},"cdn.us-east-1.threat-mitigation.aws.amazon.com":{captchaImageSelector:'img[alt*="captcha"]',inputSelector:'input[name*="captcha"]'},"2captcha.com":{captchaImageSelector:'img[class*="_captchaImage"]',inputSelector:'input[id*="simple-captcha-field"]'},"demos.telerik.com":{captchaImageSelector:'img[id*="_CaptchaImage"]',inputSelector:'input[class*="rfdTextInput"]'},"captcha.com":{captchaImageSelector:'img[id*="demoCaptcha_CaptchaImage"]',inputSelector:'input[id*="captchaCode"]'},"register.rediff.com":{captchaImageSelector:'[class="captchaImageCnt"] img[class*="captchaImage"]',inputSelector:'form[name*="register_mail"] input[class*="captcha"]'},"iforgot.apple.com":{captchaImageSelector:'[class="idms-captcha-wrapper"] [class*="img-wrapper"] img',inputSelector:'[class*="captcha-input-container"] input[class*="captcha-input"]'},"id.zing.vn":{captchaImageSelector:'img[src*="zing.vn/captcha2"]',inputSelector:'input[name="captcha"]'},"accounts.zoho.com":{captchaImageSelector:'img[id*="captcha-image"]',inputSelector:'.captcha_holder input[id*="captcha"]'},"poczta.interia.pl":{captchaImageSelector:'img[id*="captcha__img"]',inputSelector:'input[id*="captcha[input]"]'},"www.instagram.com":{captchaImageSelector:'img[src*="/captcha/"]',inputSelector:'textarea[data-bloks-name*="bk.components.TextInput"]'},"account.live.com":{captchaImageSelector:'img[alt*="Challenge"][src*="microsoft.com"]',inputSelector:'input[class*="hipInputText"]'}}[i];let n,l;let s="",u=!1;async function p(){if(u)return;const e=document.querySelector(r.inputSelector);if(!e)return;let a=null;for(let e=0;e<10&&(a=document.querySelector(r.captchaImageSelector),!a);e++)await c(1e3);if(!a)return;let n="";for(let e=0;e<10;e++){switch(i){case"signin.aws.amazon.com":case"www.facebook.com":case"en-gb.facebook.com":case"m.facebook.com":case"free.facebook.com":case"web.facebook.com":case"id.zing.vn":case"accounts.zoho.com":case"poczta.interia.pl":case"cdn.us-east-1.threat-mitigation.aws.amazon.com":case"www.instagram.com":case"account.live.com":n=await t("IMAGETOTEXT","createImageBase64",{url:a.src});break;case"register.rediff.com":n=m(a);break;default:n=await o(a)}if(n&&n!==s){s=n;break}await c(1e3)}if(!n)return;const p=JSON.stringify({clientKey:l,task:{type:"ImageToTextTask",imageBase64:n}}),d=await async function(e){try{return await t("SOURCE","createTask",e)||""}catch(e){return""}}(p);if(!d||d.error)return;const h=await async function(e,a,c){const o=JSON.stringify({clientKey:e,taskId:a});try{const e=await t("SOURCE","getTaskResult",{data:o,timeWait:c});return e?"fail"===e.status?{errorDescription:e.errorDescription}:e.solution?e.solution:e.type?e:null:null}catch(e){return null}}(l,d.taskId,30);h&&!h.errorDescription&&(e.value=h.text,e.dispatchEvent(new Event("input",{bubbles:!0})),u=!0)}function m(e){try{const t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;return t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}catch(e){return""}}(async()=>{await async function(){n=await a(e.POWER_ON.key,e.POWER_ON.defaultValue),l=await a(e.API_KEY.key,e.API_KEY.defaultValue)}(),await async function(){if(n&&l&&"YOUR_CLIEN_KEY"!==l&&r)for(let e=0;e<20&&!u;e++){if(document.querySelector(r.captchaImageSelector)){try{await p()}catch(e){}break}await c(1e3)}}();const o=await a(e.CLOUDFLARE.key,e.CLOUDFLARE.defaultValue);let i=o.isActive||!1,s=o.delayClick||2e3;!(await t(null,"getURL",null)).includes("omocaptcha.com")&&location.href.match("challenges.cloudflare.com/cdn-cgi/challenge-platform/")&&i&&n&&l&&"YOUR_CLIEN_KEY"!==l&&function(e){const t=chrome.dom.openOrClosedShadowRoot(document.body);if(!t)return;const a=setInterval((()=>{const e=document.getElementById("success");if(e&&"visible"===getComputedStyle(e).visibility)return void clearInterval(a);const c=t.querySelector("#content > div > div > label");var o;c&&(o=c,["pointerdown","mousedown","mouseup","click"].forEach((function(e){o.dispatchEvent(new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window}))})))}),e)}(s)})()})();