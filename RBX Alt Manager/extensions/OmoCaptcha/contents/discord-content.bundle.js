(()=>{"use strict";const e={API_KEY:{key:"api_key",defaultValue:""},APP_ID:{key:"appId",defaultValue:""},POWER_ON:{key:"power_on",defaultValue:!0},TIKTOK:{key:"tiktok",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},FUNCAPTCHA:{key:"funcaptcha",defaultValue:{delayClick:100,loop:!0,isActive:!0,maxImageCaptcha:25}},ZALO:{key:"zalo",defaultValue:{delayClick:100,loop:!0,isActive:!0}},SHOPEE:{key:"shopee",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},RECAPTCHAV2:{key:"reCaptchav2",defaultValue:{delayClick:500,loop:!0,isActive:!0,useToken:!1}},AMZN:{key:"amzn",defaultValue:{delayClick:100,loop:!0,isActive:!0}},GEETEST:{key:"geetest",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},SLIDE_ALL:{key:"slide_all",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},HCAPTCHA:{key:"hcaptcha",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},CLOUDFLARE:{key:"cloudflare",defaultValue:{delayClick:2e3,isActive:!0}},TENCENT:{key:"tencent",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}}};async function t(e,t,a){const r="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{return await new Promise(((l,o)=>{r.sendMessage({source:e,type:t,data:a},(e=>{r.lastError?o(new Error(`Error sending message: ${r.lastError.message}`)):l(e)}))}))}catch(e){throw e}}const a=async(e,t)=>{const a="undefined"!=typeof browser?browser.storage.local:chrome.storage.local,r="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{const l=await a.get([e]);if(r.lastError)throw new Error(`Error retrieving ${e}: ${r.lastError.message}`);return null!=l[e]?l[e]:t}catch(e){throw e}};Promise.resolve();async function r(e){return new Promise((t=>setTimeout(t,e)))}let l,o;let i="",c=!1;async function s(){if(c)return;let e=null;for(let t=0;t<10&&(e=document.querySelector('[class*="imageWrapper"] a[href*="discordapp.com/ephemeral"]'),!e);t++)await r(1e3);if(!e)return;let a="";for(let l=0;l<10;l++){if(a=await t("IMAGETOTEXT","createImageBase64",{url:e.href}),a&&a!==i){i=a;break}await r(1e3)}if(!a)return;const l=JSON.stringify({clientKey:o,task:{type:"ImageToTextTask",imageBase64:a}}),s=await async function(e){try{return await t("SOURCE","createTask",e)||""}catch(e){return""}}(l);if(!s||s.error)return;const n=await async function(e,a,r){const l=JSON.stringify({clientKey:e,taskId:a});try{const e=await t("SOURCE","getTaskResult",{data:l,timeWait:r});return e?"fail"===e.status?{errorDescription:e.errorDescription}:e.solution?e.solution:e.type?e:null:null}catch(e){return null}}(o,s.taskId,30);if(!n||n.errorDescription)return;document.querySelectorAll('[id*="message-accessories"] [class*="children"] button[role="button"]').forEach((e=>{const t=e.querySelector('div[class*="label"]');t&&"next"===t.textContent.trim().toLowerCase()&&e.click()})),await r(2e3);const u=document.querySelector('[class*="fieldWrapper"] [class*="wrapper"] input[class*="input"]');if(!u)return;u.value=n.text,u.dispatchEvent(new Event("input",{bubbles:!0})),await r(500),document.querySelector('footer[class*="actionBar"] button[role="button"]:nth-of-type(2) [class*="buttonChildrenWrapper"] [class*="buttonChildren"]').click(),await r(2500);document.querySelector('[id*="message-content"] [class*="emojiContainer"] img[data-name=":x:"]')?location.reload():c=!0}(async()=>{await async function(){l=await a(e.POWER_ON.key,e.POWER_ON.defaultValue),o=await a(e.API_KEY.key,e.API_KEY.defaultValue)}(),await async function(){if(l&&o&&"YOUR_CLIEN_KEY"!==o){for(let e=0;e<30;e++){const t=document.querySelectorAll('[id*="message-accessories"] [class*="children"] button[role="button"]');if(Array.from(t).some((e=>{const t=e.querySelector('div[class*="label"]');return!(!t||"verify"!==t.textContent.trim().toLowerCase()||(e.click(),0))})))break;if(29===e)return;await r(1e3)}for(let e=0;e<20&&!c;e++){if(document.querySelector('[class*="imageWrapper"] a[href*="discordapp.com/ephemeral"]')){try{await s()}catch(e){}break}await r(1e3)}}}()})()})();